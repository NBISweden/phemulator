[![build](https://github.com/NBISweden/phemulator/actions/workflows/main.yml/badge.svg)](https://github.com/NBISweden/phemulator/actions/workflows/main.yml)

# phemulator
Phemulator tool for visualising GWAS effect sizes in A_Johansson_PP

# Install and run:

```
docker run --rm -p 8787:8787 nbisweden/phemulator:v1.0.0
```

than go to browser and type `http://0.0.0.0:8787`

Certainly! Here's the user documentation for your Simulation Tool in Markdown format:

---

# Simulation Tool User Documentation

## Introduction

The Simulation Tool is a Python script designed for simulating phenotypes based on genetic variants and user-defined settings. This documentation will guide you through the usage of the tool, its features, and how to customize the simulation.

## Table of Contents

- [Installation](#installation)
- [Usage](#usage)
- [Command-Line Arguments](#command-line-arguments)
- [Settings Configuration](#settings-configuration)
- [Output](#output)

## Installation <a name="installation"></a>

Before you can use the Simulation Tool, you need to make sure you have the required dependencies installed:

- Python (3.6 or higher)
- PyBGEN
- NumPy
- Pandas

You can install the required Python packages using `pip`:

```bash
pip install pybgen numpy pandas
```

## Usage <a name="usage"></a>

To use the Simulation Tool, follow these steps:

1. Open your terminal or command prompt.

2. Navigate to the directory containing the `simulation_tool.py` script.

3. Run the script with the desired command-line arguments (explained below).

For example:

```bash
python simulation_tool.py --name my_simulation --bed_regions_path my_regions.bed --bgen_file_path my_data.bgen
```

The tool will start the simulation based on the provided settings and input data.

## Command-Line Arguments <a name="command-line-arguments"></a>

The Simulation Tool accepts several command-line arguments to customize the simulation. Here are the available options:

- `--name`: Name of the simulation (default: an autogenerated name).
- `--bed_regions_path`: Path to the BED file containing region data (default: "cds_test.bed").
- `--bgen_file_path`: Path to the BGEN file (default: "Rum_recoded_repos_norel_rnd3000_chr22.bgen").
- `--threshold`: Threshold for MAF (Minor Allele Frequency) distinguishing rare vs. common variants (default: 0.05).
- `--my_chr`: Chromosome of interest (default: "1").
- `--num_common`: Number of common variants for simulation (default: 1).
- `--num_rare`: Number of rare variants for simulation (default: 2).
- `--rare_eff_mean`: Mean effect size for rare variants (default: 2).
- `--rare_eff_std_dev`: Standard deviation of effect size for rare variants (default: 0.3).
- `--common_eff_mean`: Mean effect size for common variants (default: 0.3).
- `--common_eff_std_dev`: Standard deviation of effect size for common variants (default: 0.01).
- `--err_mean`: Mean for the error term in phenotype simulation (default: 0.05).
- `--err_sd`: Standard deviation for the error term in phenotype simulation (default: 0.01).
- `--num_sim`: Number of simulations to perform (default: 1).
- `--out`: Path to where the output should be saved (default: "./out").

## Settings Configuration <a name="settings-configuration"></a>

Settings can also be configured directly within the script using the `SettingsSingleton` class. You can modify the default settings in the `init_settings` method of the `SettingsSingleton` class.

```python
# Example of modifying settings
S.threshold = 0.1
S.num_common = 2
S.num_rare = 3
```

## Output <a name="output"></a>

The tool will generate output files including:

- JSON files containing region information and variants data.
- A CSV file containing simulated phenotype data.
- You can find these files in the specified output directory.

That's it! You can use the Simulation Tool to generate simulated phenotypes based on your genetic data and custom settings.

---

You can customize this user documentation according to your specific tool and audience. This guide provides an overview of the tool's functionality and how to use it.
